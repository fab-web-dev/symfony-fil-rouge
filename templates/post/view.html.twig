{% extends 'base.html.twig' %}

{% block title %}
	{{ post.title }}
{% endblock %}

{% block titleh %}
	{{ post.title }}
{% endblock %}

{% block imageh %}
	<header class="masthead" style="background-image: url('{{ post.image }}')">
	{% endblock %}

	{% block body %}
    <div class="parallax-body">
        <div class="test" style="background-image: url('{{ post.image }}')"></div>
    <div class="parallax-intro">
      <h1 class="parallax-color-title">{{post.title}}</h1>
      <p class="parallax-color-category">{{post.category}}</p>
    </div>
    
    <div class="parallax-content">
      <div class="parallax-container">
      <p>{{ post.content | raw }}<p>
      </div>
    </div>
    
		
        
        
        
        
        
        
        
        <!-- Post Content-->
		
        {# <article class="mb-4">
			<div class="container px-4 px-lg-5">
				<div class="row gx-4 gx-lg-5 justify-content-center">
					<div class="col-md-10 col-lg-8 col-xl-7 post-content">
						{{ post.content | raw }}
					</div>
					<div class="col-md-10 col-lg-8 col-xl-7">
						Rédigé par
						{{post.user.email}}</a>
					- Publié
					{{post.createdAt | date | ago}}
					- Classé dans
					{{ post.category.name }}
				</p>
			</div>
		</div>
	</div>
</article> #}

<div class="container">
	<div class="row bootstrap snippets bootdeys">
		<div class="col-md-12 col-sm-12">
			<div class="comment-wrapper">
				<div class="panel panel-info">
					<div class="panel-heading">
						Commentaires
					</div>
					<div class="panel-body">
						{% if is_granted("IS_AUTHENTICATED_FULLY") %}
							<h2>Ajout d'un commentaire</h2>
							{{ form(form) }}{% endif %}
							<hr>
							<ul class="media-list">
								{% for comment in post.comments %}
									<li class="media">
										<div class="media-body">
											<span class="text-muted pull-right">
												<small class="text-muted">{{comment.createdAt | date | ago}}</small>
											</span>
											<strong class="text-success">{{comment.user.email}}</strong>
											{% if is_granted("ROLE_USER") and comment.user.id == app.user.id %}
												<a href="">
													<i class="fa-solid fa-pen-to-square"></i>
												</a>
												<a href="">
													<i class="fa-solid fa-trash-can"></i>
												</a>
											{% endif %}
											<p>
												{{ comment.content }}
											</p>
										</div>
									</li>
								{% endfor %}
							</ul>
						</div>
					</div>
				</div>
				<!-- Les commentaires -->
				{# {% if(post.comments | length > 0) %}
				                                <h2>Les commentaires</h2>
				                                <ul class="list-group">
				                                    {% for comment in post.comments %}
				                                        <li class="list-group-item">
				                                            <b>{{ comment.createdAt | ago }}, {{ comment.user.email }} a écrit : </b>
				                                            {% if is_granted("ROLE_USER") and comment.user.id == app.user.id %}
				                                                <a href=""><i class="fa-solid fa-pen-to-square"></i></a>
				                                                <a href=""><i class="fa-solid fa-trash-can"></i></a>
				                                            {% endif %}
				                                            <br>
				                                            {{ comment.content }}
				                                        </li>
				                                    {% endfor %}
				                                </ul>                            
				                            {% endif %}
				                            <!-- Le formulaire de commentaire -->
				                            {% if is_granted("IS_AUTHENTICATED_FULLY") %}
				                                <h2>Ajout d'un commentaire</h2>
				                                {{ form(form) }}
				                            {% endif %} #}
                </div>
			</div>
		</div>
	</div>
{% endblock %}
